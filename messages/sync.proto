syntax = "proto3";

import "messages/basic.proto";

message SyncRequest {
    Block starting_block = 1;
    repeated uint32 weak_checksums = 2;
}

message SyncResponse {
    Block requested_block = 1;
    oneof response {
        bool full_match = 2;
        bool requesting_strong_checksum = 3;
        string correction_data = 4;
    }
}

message ChecksumAddendum {
    Block block = 1;
    string strong_checksum = 2;
}

message CheckFileRequest {
    File file = 1;
}

message CheckFileResponse {
    File requested_file = 1;
    oneof response {
        bool match = 2;
        string new_file_name = 3;
        bool request_syncing = 4;
        SyncRequest sync_request = 5;
    }
}

message FileRequest {
    File file = 1;
}

message FileResponse {
    File requested_file = 1;
    string data = 2;
}
