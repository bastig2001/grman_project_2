syntax = "proto3";

import "messages/basic.proto";

message SyncRequest {
    Block block = 1;
    string weak_signature = 2;
    string strong_signature = 3;
}

message SyncResponse {
    Block requested_block = 1;
    oneof response {
        bool full_match = 2;
        bool requesting_strong_signature = 3;
        bool requesting_correction = 4;
        string correction_data = 5;
    }
}

message Correction {
    Block block = 1;
    string correction_data = 2;
}

message CheckFileRequest {
    File file = 1;
}

message CheckFileResponse {
    File requested_file = 1;
    oneof response {
        bool full_match = 2;
        bool requesting_signature = 3;
        string new_file_name = 4;
        bool request_syncing = 5;
        SyncRequest sync_request = 6;
    }
}

message FileRequest {
    File file = 1;
}

message FileResponse {
    File requested_file = 1;
    string data = 2;
}
